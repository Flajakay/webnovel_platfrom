@import "tailwindcss";
@import "react-quill-new/dist/quill.snow.css";

/* Configure dark mode to use class-based detection instead of system preference */
@custom-variant dark (&:where(.dark, .dark *));

@import "tailwindcss";
@layer utilities {
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}
:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 248, 250, 252;
  --background-end-rgb: 241, 245, 249;
}

.dark {
  --foreground-rgb: 255, 255, 255;
  --background-start-rgb: 15, 23, 42;
  --background-end-rgb: 30, 41, 59;
  color-scheme: dark;
}

/* Layer component styles */
@layer components {
  .dark body {
    @apply bg-gray-900 text-white;
  }
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
    to bottom,
    rgb(var(--background-start-rgb)),
    rgb(var(--background-end-rgb))
  );
  min-height: 100vh;
}

/* Reader-specific styles */
.reader-content {
  @apply max-w-3xl mx-auto;
}

.reader-content p {
  @apply mb-4;
}

/* Reading progress bar */
.reading-progress {
  @apply fixed top-0 left-0 h-1 bg-indigo-600 z-50;
  transition: width 0.2s ease;
}

/* Custom aspect ratio for novel cards */
.aspect-w-2 {
  position: relative;
  padding-bottom: calc(var(--tw-aspect-h) / var(--tw-aspect-w) * 100%);
  --tw-aspect-w: 2;
}

.aspect-h-3 {
  --tw-aspect-h: 3;
}

.aspect-w-2 > * {
  position: absolute;
  height: 100%;
  width: 100%;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

/* React Quill Editor Styling */
.react-quill-container {
  position: relative;
}

.react-quill-container .ql-editor {
  min-height: 200px;
}

.react-quill-container .ql-container {
  height: calc(100% - 42px); /* Account for toolbar height */
}

.react-quill-container .quill {
  height: 100%;
}

/* Line clamp classes for truncating text */
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100 dark:bg-gray-800;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-400 dark:bg-gray-600 rounded;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-500 dark:bg-gray-500;
}

/* Focus styles for better accessibility */
*:focus-visible {
  @apply outline-none ring-2 ring-indigo-500 ring-offset-2 ring-offset-white dark:ring-offset-gray-900;
}

/* Better spacing for mobile devices */
@media (max-width: 640px) {
  .pb-16 {
    padding-bottom: 4rem;
  }
}

/* Desktop only elements - hidden on mobile */
.desktop-only {
  display: none;
}

@media (min-width: 640px) {
  .desktop-only {
    display: inline-flex;
  }
}

/* In a file like src/styles/quill-dark-theme.css or your main index.css */

/* Target the editor content area */
.dark .ql-editor {
  background-color: #1f2937; /* Dark gray for editor background */
  color: #f3f4f6; /* Light gray for text */
}

/* Target placeholders */
.dark .ql-editor.ql-blank::before {
  color: #9ca3af; /* Lighter gray for placeholder text */
}

/* Target toolbar background and icons */
.dark .ql-toolbar.ql-snow {
  background-color: #374151; /* Slightly lighter dark gray for toolbar */
  border-color: #4b5563; /* Darker border */
}

.dark .ql-toolbar.ql-snow .ql-stroke {
  stroke: #d1d5db; /* Light gray for icons that are strokes */
}

.dark .ql-toolbar.ql-snow .ql-fill {
  fill: #d1d5db; /* Light gray for icons that are fills */
}

.dark .ql-toolbar.ql-snow .ql-picker-label {
  color: #d1d5db; /* Light gray for dropdown labels */
}

.dark .ql-toolbar.ql-snow .ql-picker-options {
  background-color: #374151; /* Dark background for dropdown options */
  border-color: #4b5563;
}

.dark .ql-toolbar.ql-snow .ql-picker-item {
  color: #f3f4f6; /* Light gray for dropdown items */
}

/* Hover and active states for toolbar buttons */
.dark .ql-toolbar.ql-snow button:hover .ql-stroke,
.dark .ql-toolbar.ql-snow button:focus .ql-stroke,
.dark .ql-toolbar.ql-snow button.ql-active .ql-stroke,
.dark .ql-toolbar.ql-snow .ql-picker-label:hover .ql-stroke,
.dark .ql-toolbar.ql-snow .ql-picker-label:focus .ql-stroke,
.dark .ql-toolbar.ql-snow .ql-picker-label.ql-active .ql-stroke,
.dark .ql-toolbar.ql-snow .ql-picker-item:hover .ql-stroke,
.dark .ql-toolbar.ql-snow .ql-picker-item:focus .ql-stroke,
.dark .ql-toolbar.ql-snow .ql-picker-item.ql-active .ql-stroke {
  stroke: #a78bfa; /* Example: A purple shade for hover/active, matching your indigo-500 */
}

.dark .ql-toolbar.ql-snow button:hover .ql-fill,
.dark .ql-toolbar.ql-snow button:focus .ql-fill,
.dark .ql-toolbar.ql-snow button.ql-active .ql-fill,
.dark .ql-toolbar.ql-snow .ql-picker-label:hover .ql-fill,
.dark .ql-toolbar.ql-snow .ql-picker-label:focus .ql-fill,
.dark .ql-toolbar.ql-snow .ql-picker-label.ql-active .ql-fill,
.dark .ql-toolbar.ql-snow .ql-picker-item:hover .ql-fill,
.dark .ql-toolbar.ql-snow .ql-picker-item:focus .ql-fill,
.dark .ql-toolbar.ql-snow .ql-picker-item.ql-active .ql-fill {
  fill: #a78bfa;
}


/* Adjust specific formatting like headers, lists, etc. */
.dark .ql-editor h1 {
  color: #e5e7eb; /* Slightly different shade for headers */
}

.dark .ql-editor strong {
  color: #e5e7eb;
}

.dark .ql-editor ol,
.dark .ql-editor ul {
  color: #f3f4f6;
}

/* Ensure borders are dark as well */
.dark .ql-container.ql-snow {
  border-color: #4b5563;
}